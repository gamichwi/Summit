(this["webpackJsonpsummit-front-end"]=this["webpackJsonpsummit-front-end"]||[]).push([[0],{55:function(e,t,a){e.exports=a(73)},60:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),i=a(19),c=a.n(i),u=(a(60),a(23)),s=a(10),o=a(77),m=a(7),d=a.n(m),p=a(6),E=a(84),g=a(83),v=a(75),f=function(e){return e.href?l.a.createElement(v.a,{variant:e.variant,href:e.href},e.children):e.to?l.a.createElement(s.b,{to:e.to,exact:e.exact,className:"btn btn-secondary"},e.children):l.a.createElement(v.a,{variant:e.variant,type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)},b=a(79),h=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{show:e.show,onHide:e.hide},l.a.createElement(b.a.Header,{closeButton:!0},l.a.createElement(b.a.Title,null,e.header)),l.a.createElement(b.a.Body,null,e.children),l.a.createElement(b.a.Footer,null,e.footer)))},I=(a(67),function(e){var t=Object(r.useRef)(),a=e.center,n=e.zoom;return Object(r.useEffect)((function(){var e=new window.google.maps.Map(t.current,{center:a,zoom:n});new window.google.maps.Marker({position:a,map:e})}),[a,n]),l.a.createElement("div",{ref:t,className:"map",style:e.style})}),O=function(e){return l.a.createElement(h,{hide:e.hide,header:"An Error Occurred!",show:!!e.error,footer:l.a.createElement(f,{onClick:e.hide},"Okay")},l.a.createElement("p",null,e.error))},y=a(76),w=(a(68),function(e){return l.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},l.a.createElement(y.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")))}),j=Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),x=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(),i=Object(p.a)(l,2),c=i[0],u=i[1],s=Object(r.useRef)([]),o=Object(r.useCallback)((function(e){var t,a,r,l,i,c,o=arguments;return d.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"GET",a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:{},n(!0),l=new AbortController,s.current.push(l),m.prev=6,m.next=9,d.a.awrap(fetch(e,{method:t,body:a,headers:r,signal:l.signal}));case 9:return i=m.sent,m.next=12,d.a.awrap(i.json());case 12:if(c=m.sent,s.current=s.current.filter((function(e){return e!==l})),i.ok){m.next=17;break}throw console.log("response",i),new Error(c.message);case 17:return n(!1),m.abrupt("return",c);case 21:throw m.prev=21,m.t0=m.catch(6),u(m.t0.message),n(!1),m.t0;case 26:case"end":return m.stop()}}),null,null,[[6,21]])}),[]);return Object(r.useEffect)((function(){return function(){s.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:c,sendRequest:o,clearError:function(){u(null)}}},k=function(e){var t=x(),a=t.isLoading,n=t.error,i=t.sendRequest,c=t.clearError,u=Object(r.useContext)(j),s=Object(r.useState)(!1),o=Object(p.a)(s,2),m=o[0],v=o[1],b=function(){return v(!1)},y=Object(r.useState)(!1),k=Object(p.a)(y,2),T=k[0],D=k[1],S=function(){return D(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{error:n,hide:c}),l.a.createElement(h,{show:m,hide:b,header:e.title,footer:l.a.createElement(f,{onClick:b},"CLOSE")},l.a.createElement("div",{className:"map-container"},l.a.createElement(I,{center:e.targetCoordinates,zoom:16}))),l.a.createElement(h,{show:T,hide:S,header:"Are you sure you want to delete?",footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{variant:"secondary",onClick:S},"CANCEL"),l.a.createElement(f,{variant:"danger",onClick:function(){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!1),t.prev=1,t.next=4,d.a.awrap(i("/api/summits/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+u.token}));case 4:e.onDelete(e.id),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[1,7]])}},"DELETE"))},"Deleting a Summit can not be undone..."),l.a.createElement(E.a.Item,null,l.a.createElement(g.a,{className:"bg-dark text-white"},a&&l.a.createElement(w,{asOverlay:!0}),l.a.createElement(g.a.Img,{src:"/".concat(e.setImage),alt:e.title}),l.a.createElement(g.a.ImgOverlay,null,l.a.createElement(g.a.Title,null,e.title),l.a.createElement(g.a.Text,null,e.targetLocation),l.a.createElement(g.a.Text,null,"Countdown"),l.a.createElement(f,{onClick:function(){return v(!0)}},"MAP"),u.userId===e.userId&&l.a.createElement(f,{variant:"secondary",to:"/summits/".concat(e.id)},"EDIT"),u.userId===e.userId&&l.a.createElement(f,{variant:"danger",onClick:function(){return D(!0)}},"DELETE")))))},T=function(e){return 0===e.items.length?l.a.createElement("div",{className:"default"},l.a.createElement("h2",null,"No Summits were found.")):l.a.createElement(E.a,null,e.items.map((function(t){return l.a.createElement(k,{key:t.id,id:t.id,userId:t.userId,title:t.title,completedAddress:t.completedAddress,setDate:t.setDate,completedDate:t.completedDate,completed:t.completed,setImage:t.setImage,completedImage:t.completedImage,setCoordinates:t.setLocation,completedCoordinates:t.completedLocation,targetDate:t.targetDate,targetCoordinates:t.targetCoordinates,likes:t.likes,summitWord:t.word,private:t.private,onDelete:e.onDeleteSummit})})))},D=[{id:"p1",creatorId:"u1",title:"Win a foosball championship",completedAddress:"Bartronica, Melbourne",setDate:"",targetDate:"",completedDate:"",completed:!1,setImage:"uploads/images/Foosball.jpeg",completedImage:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse4.mm.bing.net%2Fth%3Fid%3DOIP.z1EQMkYXiRUgWV9rkGpT9AHaE8%26pid%3DApi&f=1",setLocation:{},targetLocation:{lat:-37.8785909,lng:144.9739747},targetAddress:"",completedLocation:{lat:-37.8785909,lng:144.9739747},likes:[],summitWord:[],private:!0},{id:"p2",creatorId:"u2",title:"Win a boxing championship",completedAddress:"Melbourne Fight Club",setDate:"",targetDate:"",completedDate:"",completed:!1,setImage:"uploads/images/Boxing.jpeg",completedImage:"https://akm-img-a-in.tosshub.com/indiatoday/images/story/201910/jamuna9102019-770x433.png?VB4oJ8dItSqFhwwpLlkhrdCDSzixJd4w",setLocation:{},targetLocation:{lat:-37.8785909,lng:144.9739747},targetAddress:"",completedLocation:{lat:-37.7873385,lng:144.8642536},likes:[],summitWord:[],private:!0}],S=function(){return l.a.createElement(T,{items:D})},C=function(e){return l.a.createElement(E.a.Item,null,l.a.createElement(g.a,{style:{width:"18rem"}},l.a.createElement(s.b,{to:"/".concat(e.id,"/summits")},l.a.createElement(g.a.Img,{variant:"top",src:"/".concat(e.image)})),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,e.name),l.a.createElement(g.a.Text,null,"Conquering ",e.summitCount," summits!"))))},A=function(e){return 0===e.items.length?l.a.createElement("div",{className:"default"},l.a.createElement("h2",null,"No users were found.")):l.a.createElement(E.a,null,e.items.map((function(e){return l.a.createElement(C,{key:e.id,id:e.id,image:e.image,name:e.name,summitCount:e.summits.length})})))},L=function(){var e=x(),t=e.isLoading,a=e.error,n=e.sendRequest,i=e.clearError,c=Object(r.useState)(),u=Object(p.a)(c,2),s=u[0],o=u[1];return Object(r.useEffect)((function(){!function(){var e;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(n("/api/users"));case 3:e=t.sent,o(e.users),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),null,null,[[0,7]])}()}),[n]),l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{error:a,hide:i}),t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(w,{asOverlay:!0})),!t&&s&&l.a.createElement(A,{items:s}),";")},V=a(78),N=a(54),R=a(20),P=a(80),F=function(e,t){var a=!0,n=!0,r=!1,l=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value;"REQUIRE"===u.type&&(a=a&&e.trim().length>0),"MINLENGTH"===u.type&&(a=a&&e.trim().length>=u.val),"MAXLENGTH"===u.type&&(a=a&&e.trim().length<=u.val),"MIN"===u.type&&(a=a&&+e>=u.val),"MAX"===u.type&&(a=a&&+e<=u.val),"EMAIL"===u.type&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){r=!0,l=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a},M=function(e,t){switch(t.type){case"CHANGE":return Object(R.a)({},e,{value:t.val,isValid:F(t.val,t.validators)});case"TOUCH":return Object(R.a)({},e,{value:t.val,isTouched:!0});default:return e}},U=function(e){var t=Object(r.useReducer)(M,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouched:!1}),a=Object(p.a)(t,2),n=a[0],i=a[1],c=e.id,u=e.onInput,s=n.value,o=n.isValid;Object(r.useEffect)((function(){u(c,s,o)}),[c,s,o,u]);var m=function(t){i({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(t){i({type:"TOUCH",val:t.target.value,validators:e.validators})},E="input"===e.element?l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a.Control,{"aria-label":"Large","aria-describedby":"inputGroup-sizing-sm",id:e.id,type:e.type,placeholder:e.placeholder,onChange:m,onBlur:d,value:n.value})):l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a.Control,{id:e.id,rows:e.rows||3,onChange:m,onBlur:d,value:n.value}));return l.a.createElement("div",null,l.a.createElement(P.a.Label,{htmlFor:e.id},e.label),E,!n.isValid&&n.isTouched&&l.a.createElement("p",null,e.errorText))},G=(a(70),function(e){var t=Object(r.useState)(),a=Object(p.a)(t,2),n=a[0],i=a[1],c=Object(r.useState)(),u=Object(p.a)(c,2),s=u[0],o=u[1],m=Object(r.useState)(!1),d=Object(p.a)(m,2),E=d[0],g=d[1],v=Object(r.useRef)();Object(r.useEffect)((function(){if(n){var e=new FileReader;e.onload=function(){o(e.result)},e.readAsDataURL(n)}}),[n]);return l.a.createElement("div",null,l.a.createElement("input",{id:e.id,ref:v,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var a,n=E;t.target.files&&1===t.target.files.length?(a=t.target.files[0],i(a),g(!0),n=!0):(g(!1),n=!1),e.onInput(e.id,a,n)}}),l.a.createElement("div",{className:"image-upload ".concat(e.center&&"center")},l.a.createElement("div",{className:"image-upload__preview"},s&&l.a.createElement("img",{src:s,alt:"Preview"}),!s&&l.a.createElement("p",null,"Please pick an image.")),l.a.createElement(f,{type:"button",onClick:function(){v.current.click()}},"PICK IMAGE")))}),H=a(37),B=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(R.a)({},e,{inputs:Object(R.a)({},e.inputs,Object(H.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},W=function(e,t){var a=Object(r.useReducer)(B,{inputs:e,isValid:t}),n=Object(p.a)(a,2),l=n[0],i=n[1];return[l,Object(r.useCallback)((function(e,t,a){i({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),Object(r.useCallback)((function(e,t){i({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},q=function(){var e=Object(r.useContext)(j),t=x(),a=t.isLoading,n=t.error,i=t.sendRequest,c=t.clearError,s=W({title:{value:"",isValid:!1},targetDate:{value:"",isValid:!1},targetAddress:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),m=Object(p.a)(s,2),E=m[0],g=m[1],v=Object(u.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{error:n,hide:c}),a&&l.a.createElement(w,{asOverlay:!0}),l.a.createElement(o.a,null,l.a.createElement("form",{onSubmit:function(t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,(a=new FormData).append("title",E.inputs.title.value),a.append("targetAddress",E.inputs.targetAddress.value),a.append("targetDate",E.inputs.targetDate.value),a.append("image",E.inputs.image.value),n.next=9,d.a.awrap(i("/api/summits","POST",a,{Authorization:"Bearer "+e.token}));case 9:v.push("/"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0);case 15:case"end":return n.stop()}}),null,null,[[1,12]])}},l.a.createElement(V.a,null,l.a.createElement(N.a,null,l.a.createElement(U,{id:"title",element:"input",type:"text",label:"What is your Summit?",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid title.",onInput:g}),l.a.createElement(U,{id:"targetDate",element:"input",type:"text",label:"Target Date",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid target date.",onInput:g}),l.a.createElement(U,{id:"targetAddress",element:"input",type:"text",label:"Target Location",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid location.",onInput:g}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(f,{type:"submit",disabled:!E.isValid},"ADD SUMMIT")),l.a.createElement(N.a,null,l.a.createElement("br",null),l.a.createElement(G,{id:"image",onInput:g,errorText:"Please provide an image."})),l.a.createElement("br",null)),l.a.createElement(V.a,null))))},z=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),a=t[0],n=t[1],i=x(),c=i.isLoading,s=i.error,o=i.sendRequest,m=i.clearError,E=Object(u.h)().userId;Object(r.useEffect)((function(){!function(){var e;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(o("/api/summits/user/".concat(E)));case 3:e=t.sent,n(e.summits),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}()}),[o,E]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{error:s,hide:m}),c&&l.a.createElement(w,{asOverlay:!0}),!c&&a&&l.a.createElement(T,{items:a,onDeleteSummit:function(e){n((function(t){return t.filter((function(t){return t.id!==e}))}))}}))},Q=function(){var e=Object(r.useContext)(j),t=x(),a=t.isLoading,n=t.error,i=t.sendRequest,c=t.clearError,s=Object(r.useState)(),o=Object(p.a)(s,2),m=o[0],E=o[1],g=Object(u.g)(),v=Object(u.h)().summitId,b=W({title:{value:"",isValid:!1},targetDate:{value:"",isValid:!1},targetAddress:{value:"",isValid:!1}},!1),h=Object(p.a)(b,3),I=h[0],y=h[1],k=h[2];Object(r.useEffect)((function(){!function(){var e;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(i("api/summits/".concat(v)));case 3:e=t.sent,E(e.summit),k({title:{value:e.summit.title,isValid:!0},targetDate:{value:e.summit.targetDate,isValid:!0},targetAddress:{value:e.summit.targetAddress,isValid:!0}},!0),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),null,null,[[0,8]])}()}),[i,v,k]);return a||m?l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{error:n,hide:c}),a&&l.a.createElement(w,{asOverlay:!0}),!a&&m&&l.a.createElement("form",{onSubmit:function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,d.a.awrap(i("/api/summits/".concat(v),"PATCH",JSON.stringify({title:I.inputs.title.value,targetAddress:I.inputs.targetAddress.value,targetDate:I.inputs.targetDate.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token}));case 3:g.push("/"+e.userId+"/summits");case 4:case"end":return a.stop()}}))}},l.a.createElement(U,{id:"title",element:"input",type:"text",label:"What is your Summit?",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid Summit Title.",onInput:y,initialValue:m.title,initialValid:!0}),l.a.createElement(U,{id:"targetDate",element:"input",type:"text",label:"Target Date",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid Summit Target Date.",onInput:y,initialValue:m.targetDate,initialValid:!0}),l.a.createElement(U,{id:"targetAddress",element:"input",type:"text",label:"Target Location",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid Summit Target Location.",onInput:y,initialValue:m.targetAddress,initialValid:!0}),l.a.createElement("br",null),l.a.createElement(f,{type:"submit",disabled:!I.isValid},"UPDATE"))):l.a.createElement("h2",null,"Could not find the summit you're looking for.")},J=a(81),_=function(e){return l.a.createElement("header",{className:"main-header"},e.children)},X=function(e){var t=Object(r.useContext)(j);return l.a.createElement("div",{className:"nav-links"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(s.c,{to:"/"},"SUMMIT FEED")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(s.c,{to:"/".concat(t.userId,"/summits")},"MY SUMMITS")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(s.c,{to:"/summits/new"},"NEW SUMMIT")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(s.c,{to:"/users"},"FRIENDS")),!t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(s.c,{to:"/auth"},"AUTHENTICATE")),t.isLoggedIn&&l.a.createElement(f,{onClick:t.logout},"LOG OUT")))},Y=function(e){return l.a.createElement("div",{className:"main-navigation"},l.a.createElement(J.a,{bg:"dark",variant:"dark"},l.a.createElement(J.a.Brand,{href:"/"},l.a.createElement("img",{alt:"Summit logo",src:"https://vignette.wikia.nocookie.net/logopedia/images/9/9f/ParamountLandscape.jpg/revision/latest?cb=20130119125027",width:"30",height:"30",className:"d-inline-block align-top"})," ","Summit"),l.a.createElement(_,null,l.a.createElement(X,null))))},$=(a(82),function(){var e,t=Object(r.useContext)(j),a=Object(r.useState)(!0),n=Object(p.a)(a,2),i=n[0],c=n[1],u=x(),s=u.isLoading,o=u.error,m=u.sendRequest,E=u.clearError,g=W({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),v=Object(p.a)(g,3),b=v[0],h=v[1],I=v[2];return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{error:o,hide:E}),s&&l.a.createElement(w,{asOverlay:!0}),l.a.createElement("h2",null,"Login Required"),l.a.createElement("form",{onSubmit:function(e){var a,n,r;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),!i){l.next=13;break}return l.prev=2,l.next=5,d.a.awrap(m("/api/users/login","POST",JSON.stringify({email:b.inputs.email.value,password:b.inputs.password.value}),{"Content-Type":"application/json"}));case 5:a=l.sent,t.login(a.userId,a.token),l.next=11;break;case 9:l.prev=9,l.t0=l.catch(2);case 11:l.next=27;break;case 13:return l.prev=13,(n=new FormData).append("email",b.inputs.email.value),n.append("name",b.inputs.name.value),n.append("password",b.inputs.password.value),n.append("image",b.inputs.image.value),l.next=21,d.a.awrap(m("/api/users/signup","POST",n));case 21:r=l.sent,t.login(r.userId,r.token),l.next=27;break;case 25:l.prev=25,l.t1=l.catch(13);case 27:case"end":return l.stop()}}),null,null,[[2,9],[13,25]])}},l.a.createElement(V.a,null,l.a.createElement(N.a,null,!i&&l.a.createElement(U,{element:"input",id:"name",type:"text",label:"Your Name",validators:[{type:"REQUIRE"}],errorText:"Please enter your name.",onInput:h}),l.a.createElement(U,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:"EMAIL"}],errorText:"Please enter a valid email address.",onInput:h}),l.a.createElement(U,{element:"input",id:"password",type:"password",label:"Password",validators:[(e=8,{type:"MINLENGTH",val:e})],errorText:"Please enter a valid password, at least 8 characters.",onInput:h})),l.a.createElement(N.a,null,l.a.createElement("br",null),!i&&l.a.createElement(G,{center:!0,id:"image",onInput:h,errorText:"Please provide an image."}))),l.a.createElement("br",null),l.a.createElement(V.a,null,l.a.createElement(f,{type:"submit",disabled:!b.isValid},i?"LOGIN":"SIGNUP"),l.a.createElement(f,{onClick:function(){i?I(Object(R.a)({},b.inputs,{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):I(Object(R.a)({},b.inputs,{name:void 0,image:void 0}),b.inputs.email.isValid&&b.inputs.password.isValid),c((function(e){return!e}))},variant:"secondary"},"SWITCH TO ",i?"SIGNUP":"LOGIN"))))}),K=(a(71),function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],l=t[1],i=Object(r.useState)(),c=Object(p.a)(i,2),u=c[0],s=c[1],o=Object(r.useState)(!1),m=Object(p.a)(o,2),d=m[0],E=m[1],g=Object(r.useCallback)((function(e,t,a){l(t),s(null),E(e);var n=a||new Date((new Date).getTime()+36e5);s(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),v=Object(r.useCallback)((function(){l(null),E(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&u){var e=u.getTime()-(new Date).getTime();n=setTimeout(v,e)}else clearTimeout(n)}),[a,v,u]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&g(e.userId,e.token,new Date(e.expiration))}),[g]),{token:a,login:g,logout:v,userId:d}}(),a=t.token,i=t.login,c=t.logout,m=t.userId;return e=a?l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/",exact:!0},l.a.createElement(S,null)),l.a.createElement(u.b,{path:"/users",exact:!0},l.a.createElement(L,null)),l.a.createElement(u.b,{path:"/:userId/summits",exact:!0},l.a.createElement(z,null)),l.a.createElement(u.b,{path:"/summits/new",exact:!0},l.a.createElement(q,null)),l.a.createElement(u.b,{path:"/summits/:summitId"},l.a.createElement(Q,null)),l.a.createElement(u.a,{to:"/"})):l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/",exact:!0},l.a.createElement(S,null)),l.a.createElement(u.b,{path:"/:userId/summits",exact:!0},l.a.createElement(z,null)),l.a.createElement(u.b,{path:"/auth"},l.a.createElement($,null)),l.a.createElement(u.a,{to:"/auth"})),l.a.createElement(j.Provider,{value:{isLoggedIn:!!a,token:a,userId:m,login:i,logout:c}},l.a.createElement(s.a,null,l.a.createElement(Y,null),l.a.createElement(o.a,null,l.a.createElement("main",null,e))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(72);c.a.render(l.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[55,1,2]]]);
//# sourceMappingURL=main.80b64380.chunk.js.map