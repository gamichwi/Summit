(this["webpackJsonpsummit-front-end"]=this["webpackJsonpsummit-front-end"]||[]).push([[0],{12:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(15),c=a(52);t.a=function(e){return e.href?r.a.createElement(c.a,{variant:e.variant,href:e.href},e.children):e.to?r.a.createElement(l.b,{to:e.to,exact:e.exact,className:"btn btn-secondary"},e.children):r.a.createElement(c.a,{variant:e.variant,type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}},24:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=Object(n.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})},27:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(30);t.a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{show:e.show,onHide:e.hide},r.a.createElement(l.a.Header,{closeButton:!0},r.a.createElement(l.a.Title,null,e.header)),r.a.createElement(l.a.Body,null,e.children),r.a.createElement(l.a.Footer,null,e.footer)))}},31:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(71);a(67);t.a=function(e){return r.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},r.a.createElement(l.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}},41:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(27),c=a(12);t.a=function(e){return r.a.createElement(l.a,{hide:e.hide,header:"An Error Occurred!",show:!!e.error,footer:r.a.createElement(c.a,{onClick:e.hide},"Okay")},r.a.createElement("p",null,e.error))}},42:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(22),r=a.n(n),l=a(14),c=a(0),o=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(),i=Object(l.a)(o,2),u=i[0],s=i[1],m=Object(c.useRef)([]),d=Object(c.useCallback)((function(e){var t,a,l,c,o,i,u=arguments;return r.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:"GET",a=u.length>2&&void 0!==u[2]?u[2]:null,l=u.length>3&&void 0!==u[3]?u[3]:{},n(!0),c=new AbortController,m.current.push(c),console.log("url",e),d.prev=7,d.next=10,r.a.awrap(fetch(e,{method:t,body:a,headers:l,signal:c.signal}));case 10:return o=d.sent,d.next=13,r.a.awrap(o.json());case 13:if(i=d.sent,m.current=m.current.filter((function(e){return e!==c})),o.ok){d.next=17;break}throw new Error(i.message);case 17:return n(!1),d.abrupt("return",i);case 21:throw d.prev=21,d.t0=d.catch(7),s(d.t0.message),n(!1),d.t0;case 26:case"end":return d.stop()}}),null,null,[[7,21]])}),[]);return Object(c.useEffect)((function(){return function(){m.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:u,sendRequest:d,clearError:function(){s(null)}}}},45:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(22),c=a.n(l),o=a(14),i=a(75),u=a(76),s=a(12),m=a(27),d=(a(66),function(e){var t=Object(n.useRef)(),a=e.center,l=e.zoom;return Object(n.useEffect)((function(){var e=new window.google.maps.Map(t.current,{center:a,zoom:l});new window.google.maps.Marker({position:a,map:e})}),[a,l]),r.a.createElement("div",{ref:t,className:"map",style:e.style})}),E=a(41),g=a(31),p=a(24),f=a(42),h=function(e){var t=Object(f.a)(),a=t.isLoading,l=t.error,h=t.sendRequest,b=t.clearError,v=Object(n.useContext)(p.a),I=Object(n.useState)(!1),k=Object(o.a)(I,2),w=k[0],O=k[1],D=function(){return O(!1)},j=Object(n.useState)(!1),y=Object(o.a)(j,2),x=y[0],C=y[1],S=function(){return C(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{error:l,hide:b}),r.a.createElement(m.a,{show:w,hide:D,header:e.title,footer:r.a.createElement(s.a,{onClick:D},"CLOSE")},r.a.createElement("div",{className:"map-container"},r.a.createElement(d,{center:e.targetCoordinates,zoom:16}))),r.a.createElement(m.a,{show:x,hide:S,header:"Are you sure you want to delete?",footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{variant:"secondary",onClick:S},"CANCEL"),r.a.createElement(s.a,{variant:"danger",onClick:function(){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!1),t.prev=1,t.next=4,c.a.awrap(h("/api/summits/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+v.token}));case 4:e.onDelete(e.id),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[1,7]])}},"DELETE"))},"Deleting a Summit can not be undone..."),r.a.createElement(i.a.Item,null,r.a.createElement(u.a,{className:"bg-dark text-white"},a&&r.a.createElement(g.a,{asOverlay:!0}),r.a.createElement(u.a.Img,{src:"/".concat(e.setImage),alt:e.title}),r.a.createElement(u.a.ImgOverlay,null,r.a.createElement(u.a.Title,null,e.title),r.a.createElement(u.a.Text,null,e.targetLocation),r.a.createElement(u.a.Text,null,"Countdown"),r.a.createElement(s.a,{onClick:function(){return O(!0)}},"MAP"),v.userId===e.userId&&r.a.createElement(s.a,{variant:"secondary",to:"/summits/".concat(e.id)},"EDIT"),v.userId===e.userId&&r.a.createElement(s.a,{variant:"danger",onClick:function(){return C(!0)}},"DELETE")))))};t.a=function(e){return 0===e.items.length?r.a.createElement("div",{className:"default"},r.a.createElement("h2",null,"No Summits were found.")):r.a.createElement(i.a,null,e.items.map((function(t){return r.a.createElement(h,{key:t.id,id:t.id,userId:t.userId,title:t.title,completedAddress:t.completedAddress,setDate:t.setDate,completedDate:t.completedDate,completed:t.completed,setImage:t.setImage,completedImage:t.completedImage,setCoordinates:t.setLocation,completedCoordinates:t.completedLocation,targetDate:t.targetDate,targetCoordinates:t.targetCoordinates,likes:t.likes,summitWord:t.word,private:t.private,onDelete:e.onDeleteSummit})})))}},54:function(e,t,a){e.exports=a(70)},59:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(18),o=a.n(c),i=(a(59),a(20)),u=a(15),s=a(73),m=a(45),d=[{id:"p1",creatorId:"u1",title:"Win a foosball championship",completedAddress:"Bartronica, Melbourne",setDate:"",targetDate:"",completedDate:"",completed:!1,setImage:"uploads/images/Foosball.jpeg",completedImage:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse4.mm.bing.net%2Fth%3Fid%3DOIP.z1EQMkYXiRUgWV9rkGpT9AHaE8%26pid%3DApi&f=1",setLocation:{},targetLocation:{lat:-37.8785909,lng:144.9739747},targetAddress:"",completedLocation:{lat:-37.8785909,lng:144.9739747},likes:[],summitWord:[],private:!0},{id:"p2",creatorId:"u2",title:"Win a boxing championship",completedAddress:"Melbourne Fight Club",setDate:"",targetDate:"",completedDate:"",completed:!1,setImage:"uploads/images/Boxing.jpeg",completedImage:"https://akm-img-a-in.tosshub.com/indiatoday/images/story/201910/jamuna9102019-770x433.png?VB4oJ8dItSqFhwwpLlkhrdCDSzixJd4w",setLocation:{},targetLocation:{lat:-37.8785909,lng:144.9739747},targetAddress:"",completedLocation:{lat:-37.7873385,lng:144.8642536},likes:[],summitWord:[],private:!0}],E=function(){return l.a.createElement(m.a,{items:d})},g=a(74),p=function(e){return l.a.createElement("header",{className:"main-header"},e.children)},f=a(12),h=a(24),b=function(e){var t=Object(r.useContext)(h.a);return l.a.createElement("div",{className:"nav-links"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(u.c,{to:"/"},"SUMMIT FEED")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(u.c,{to:"/".concat(t.userId,"/summits")},"MY SUMMITS")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(u.c,{to:"/summits/new"},"NEW SUMMIT")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(u.c,{to:"/users"},"FRIENDS")),!t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(u.c,{to:"/auth"},"AUTHENTICATE")),t.isLoggedIn&&l.a.createElement(f.a,{onClick:t.logout},"LOG OUT")))},v=function(e){return l.a.createElement("div",{className:"main-navigation"},l.a.createElement(g.a,{bg:"dark",variant:"dark"},l.a.createElement(g.a.Brand,{href:"/"},l.a.createElement("img",{alt:"Summit logo",src:"https://vignette.wikia.nocookie.net/logopedia/images/9/9f/ParamountLandscape.jpg/revision/latest?cb=20130119125027",width:"30",height:"30",className:"d-inline-block align-top"})," ","Summit"),l.a.createElement(p,null,l.a.createElement(b,null))))},I=a(31),k=a(14),w=(a(68),l.a.lazy((function(){return a.e(7).then(a.bind(null,92))}))),O=l.a.lazy((function(){return a.e(3).then(a.bind(null,88))})),D=l.a.lazy((function(){return a.e(6).then(a.bind(null,89))})),j=l.a.lazy((function(){return a.e(5).then(a.bind(null,90))})),y=l.a.lazy((function(){return a.e(4).then(a.bind(null,91))})),x=function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(k.a)(e,2),a=t[0],l=t[1],c=Object(r.useState)(),o=Object(k.a)(c,2),i=o[0],u=o[1],s=Object(r.useState)(!1),m=Object(k.a)(s,2),d=m[0],E=m[1],g=Object(r.useCallback)((function(e,t,a){l(t),u(null),E(e);var n=a||new Date((new Date).getTime()+36e5);u(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),p=Object(r.useCallback)((function(){l(null),E(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&i){var e=i.getTime()-(new Date).getTime();n=setTimeout(p,e)}else clearTimeout(n)}),[a,p,i]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&g(e.userId,e.token,new Date(e.expiration))}),[g]),{token:a,login:g,logout:p,userId:d}}(),a=t.token,c=t.login,o=t.logout,m=t.userId;return e=a?l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/",exact:!0},l.a.createElement(E,null)),l.a.createElement(i.b,{path:"/users",exact:!0},l.a.createElement(w,null)),l.a.createElement(i.b,{path:"/:userId/summits",exact:!0},l.a.createElement(D,null)),l.a.createElement(i.b,{path:"/summits/new",exact:!0},l.a.createElement(O,null)),l.a.createElement(i.b,{path:"/summits/:summitId"},l.a.createElement(j,null)),l.a.createElement(i.a,{to:"/"})):l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/",exact:!0},l.a.createElement(E,null)),l.a.createElement(i.b,{path:"/:userId/summits",exact:!0},l.a.createElement(D,null)),l.a.createElement(i.b,{path:"/auth"},l.a.createElement(y,null)),l.a.createElement(i.a,{to:"/auth"})),l.a.createElement(h.a.Provider,{value:{isLoggedIn:!!a,token:a,userId:m,login:c,logout:o}},l.a.createElement(u.a,null,l.a.createElement(v,null),l.a.createElement(s.a,null,l.a.createElement("main",null,l.a.createElement(r.Suspense,{fallback:l.a.createElement(I.a,{asOverlay:!0})},e)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(69);o.a.render(l.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.22e8a2dc.chunk.js.map