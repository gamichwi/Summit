(this["webpackJsonpsummit-front-end"]=this["webpackJsonpsummit-front-end"]||[]).push([[0],{14:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(8),o=a(53),c=a(52),i=a(45);t.a=function(e){return e.href?e.toolTipText?r.a.createElement(o.a,{placement:"top",overlay:r.a.createElement(c.a,{id:"button-toolip"}," ",e.toolTipText)},r.a.createElement(i.a,{variant:e.variant,href:e.href},e.children)):r.a.createElement(i.a,{variant:e.variant,href:e.href},e.children):e.to?e.toolTipText?r.a.createElement(o.a,{placement:"top",overlay:r.a.createElement(c.a,{id:"button-toolip"},e.toolTipText)},r.a.createElement(l.b,{to:e.to,exact:e.exact,className:"btn btn-secondary"},e.children)):r.a.createElement(l.b,{to:e.to,exact:e.exact,className:"btn btn-secondary"},e.children):e.toolTipText?r.a.createElement(o.a,{placement:"top",overlay:r.a.createElement(c.a,{id:"button-toolip"}," ",e.toolTipText)},r.a.createElement(i.a,{variant:e.variant,type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)):r.a.createElement(i.a,{variant:e.variant,type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}},22:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=Object(n.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})},32:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(34);t.a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{show:e.show,onHide:e.hide},r.a.createElement(l.a.Header,{closeButton:!0},r.a.createElement(l.a.Title,null,e.header)),r.a.createElement(l.a.Body,null,e.children),r.a.createElement(l.a.Footer,null,e.footer)))}},35:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(87);a(80);t.a=function(e){return r.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},r.a.createElement(l.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}},54:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(32),o=a(14);t.a=function(e){return r.a.createElement(l.a,{hide:e.hide,header:"An Error Occurred!",show:!!e.error,footer:r.a.createElement(o.a,{onClick:e.hide},"Okay")},r.a.createElement("p",null,e.error))}},55:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(27),r=a.n(n),l=a(16),o=a(0),c=function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(o.useState)(),i=Object(l.a)(c,2),s=i[0],u=i[1],m=Object(o.useRef)([]),d=Object(o.useCallback)((function(e){var t,a,l,o,c,i,s=arguments;return r.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"GET",a=s.length>2&&void 0!==s[2]?s[2]:null,l=s.length>3&&void 0!==s[3]?s[3]:{},n(!0),o=new AbortController,m.current.push(o),console.log("url",e),d.prev=7,d.next=10,r.a.awrap(fetch(e,{method:t,body:a,headers:l,signal:o.signal}));case 10:return c=d.sent,d.next=13,r.a.awrap(c.json());case 13:if(i=d.sent,m.current=m.current.filter((function(e){return e!==o})),c.ok){d.next=17;break}throw new Error(i.message);case 17:return n(!1),d.abrupt("return",i);case 21:throw d.prev=21,d.t0=d.catch(7),u(d.t0.message),n(!1),d.t0;case 26:case"end":return d.stop()}}),null,null,[[7,21]])}),[]);return Object(o.useEffect)((function(){return function(){m.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:s,sendRequest:d,clearError:function(){u(null)}}}},59:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(27),o=a.n(l),c=a(16),i=a(92),s=a(44),u=a(14),m=a(32),d=(a(79),function(e){var t=Object(n.useRef)(),a=e.center,l=e.zoom;return Object(n.useEffect)((function(){var e=new window.google.maps.Map(t.current,{center:a,zoom:l});new window.google.maps.Marker({position:a,map:e})}),[a,l]),r.a.createElement("div",{ref:t,className:"map",style:e.style})}),g=a(54),p=a(35),E=a(22),f=a(55),h=function(e,t){var a,n;if(console.log("date1",e),console.log("date2",t),e)a=new Date(e),a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());else{var r=new Date;a=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())}n=new Date(t);var l=Math.floor((Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-a)/864e5);return console.log(l),l},b=function(e){var t=Object(f.a)(),a=t.isLoading,l=t.error,b=t.sendRequest,v=t.clearError,k=Object(n.useContext)(E.a),w=Object(n.useState)(!1),I=Object(c.a)(w,2),x=I[0],y=I[1],D=function(){return y(!1)},O=Object(n.useState)(!1),T=Object(c.a)(O,2),C=T[0],j=T[1],L=function(){return j(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{error:l,hide:v}),r.a.createElement(m.a,{show:x,hide:D,header:e.title,footer:r.a.createElement(u.a,{onClick:D},"CLOSE")},r.a.createElement("div",{className:"map-container"},r.a.createElement(d,{center:e.targetCoordinates,zoom:16}))),r.a.createElement(m.a,{show:C,hide:L,header:"Are you sure you want to delete?",footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{variant:"secondary",onClick:L},"CANCEL"),r.a.createElement(u.a,{variant:"danger",onClick:function(){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!1),t.prev=1,t.next=4,o.a.awrap(b("/api/summits/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+k.token}));case 4:e.onDelete(e.id),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[1,7]])}},"DELETE"))},"Deleting a Summit can not be undone..."),r.a.createElement(i.a,{className:"bg-dark text-white summitItem"},a&&r.a.createElement(p.a,{asOverlay:!0}),r.a.createElement(i.a.Img,{src:"/".concat(e.setImage),alt:e.title}),r.a.createElement(i.a.Body,null,r.a.createElement(i.a.Title,null,e.title),r.a.createElement(i.a.Text,null,e.targetLocation),r.a.createElement(i.a.Text,null,"Countdown: ",h(null,e.targetDate)," days to go!"),r.a.createElement(u.a,{toolTipText:"Map!",className:"map",onClick:function(){return y(!0)}},r.a.createElement(s.b,null)),k.userId===e.userId&&r.a.createElement(u.a,{toolTipText:"Edit!",className:"edit",variant:"secondary",to:"/summits/".concat(e.id)},r.a.createElement(s.c,null)),k.userId===e.userId&&r.a.createElement(u.a,{toolTipText:"Delete!",className:"delete",variant:"danger",onClick:function(){return j(!0)}},r.a.createElement(s.a,null)))))};a(81),t.a=function(e){return 0===e.items.length?r.a.createElement("div",{className:"default"},r.a.createElement("h2",null,"No Summits were found.")):r.a.createElement("div",{className:"flexContainer"},e.items.map((function(t){return r.a.createElement(b,{key:t.id,id:t.id,userId:t.userId,title:t.title,completedAddress:t.completedAddress,setDate:t.setDate,completedDate:t.completedDate,completed:t.completed,setImage:t.setImage,completedImage:t.completedImage,setCoordinates:t.setLocation,completedCoordinates:t.completedLocation,targetDate:t.targetDate,targetCoordinates:t.targetCoordinates,likes:t.likes,summitWord:t.word,private:t.private,onDelete:e.onDeleteSummit})})))}},67:function(e,t,a){e.exports=a(86)},72:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(9),c=a.n(o),i=(a(72),a(24)),s=a(8),u=a(89),m=a(59),d=[{id:"p2",creatorId:"u2",title:"Win a boxing championship",completedAddress:"Melbourne Fight Club",setDate:"",targetDate:"6/5/21",completedDate:"",completed:!1,setImage:"uploads/images/Boxing.jpeg",completedImage:"https://akm-img-a-in.tosshub.com/indiatoday/images/story/201910/jamuna9102019-770x433.png?VB4oJ8dItSqFhwwpLlkhrdCDSzixJd4w",setLocation:{},targetLocation:{lat:-37.8192442,lng:144.9620749},targetAddress:"",completedLocation:{lat:-37.7873385,lng:144.8642536},likes:[],summitWord:[],private:!0},{id:"p1",creatorId:"u1",title:"Win a foosball championship",completedAddress:"Bartronica, Melbourne",setDate:"",targetDate:"9/8/20",completedDate:"",completed:!1,setImage:"uploads/images/Foosball.jpeg",completedImage:"https://3.bp.blogspot.com/_TWDIyi5pqlc/TCSymSdTlkI/AAAAAAAAFm4/zzGzAh3S1mQ/s1600/artwork_images_365_268246_maurizio-cattelan-1.jpg",setLocation:{},targetLocation:{lat:-37.8177681,lng:144.9610117},targetAddress:"",completedLocation:{lat:-37.8785909,lng:144.9739747},likes:[],summitWord:[],private:!0}],g=function(){return l.a.createElement(m.a,{items:d})},p=a(91),E=(a(14),a(22)),f=a(90),h=function(){var e=Object(r.useContext)(E.a);return l.a.createElement(p.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},l.a.createElement(p.a.Brand,{href:"/"}," ",l.a.createElement("img",{alt:"Summit logo",src:"https://i.imgur.com/mpa7HRl.png",width:"90",height:"30",className:"d-inline-block align-top"})),l.a.createElement(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"responsive-navbar-nav"},l.a.createElement(f.a,{className:"mr-auto"},e.isLoggedIn&&l.a.createElement(f.a.Link,{as:s.b,to:"/".concat(e.userId,"/summits")},"My Summits"),e.isLoggedIn&&l.a.createElement(f.a.Link,{as:s.b,to:"/summits/new"},"New Summit"),e.isLoggedIn&&l.a.createElement(f.a.Link,{as:s.b,to:"/users"},"Summiteers")),l.a.createElement(f.a,null,!e.isLoggedIn&&l.a.createElement(f.a.Link,{as:s.b,to:"/auth"},"Authenticate"),e.isLoggedIn&&l.a.createElement(f.a.Link,{eventKey:2,onClick:e.logout},"Log Out"))))},b=a(35),v=a(16),k=(a(83),function(e){return l.a.createElement("footer",{className:"footer"})}),w=(a(84),l.a.lazy((function(){return a.e(6).then(a.bind(null,107))}))),I=l.a.lazy((function(){return a.e(3).then(a.bind(null,103))})),x=l.a.lazy((function(){return a.e(7).then(a.bind(null,104))})),y=l.a.lazy((function(){return a.e(5).then(a.bind(null,105))})),D=l.a.lazy((function(){return a.e(4).then(a.bind(null,106))})),O=function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(v.a)(e,2),a=t[0],l=t[1],o=Object(r.useState)(),c=Object(v.a)(o,2),i=c[0],s=c[1],u=Object(r.useState)(!1),m=Object(v.a)(u,2),d=m[0],g=m[1],p=Object(r.useCallback)((function(e,t,a){l(t),s(null),g(e);var n=a||new Date((new Date).getTime()+36e5);s(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),E=Object(r.useCallback)((function(){l(null),g(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&i){var e=i.getTime()-(new Date).getTime();n=setTimeout(E,e)}else clearTimeout(n)}),[a,E,i]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&p(e.userId,e.token,new Date(e.expiration))}),[p]),{token:a,login:p,logout:E,userId:d}}(),a=t.token,o=t.login,c=t.logout,m=t.userId;return e=a?l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/",exact:!0},l.a.createElement(g,null)),l.a.createElement(i.b,{path:"/users",exact:!0},l.a.createElement(w,null)),l.a.createElement(i.b,{path:"/:userId/summits",exact:!0},l.a.createElement(x,null)),l.a.createElement(i.b,{path:"/summits/new",exact:!0},l.a.createElement(I,null)),l.a.createElement(i.b,{path:"/summits/:summitId"},l.a.createElement(y,null)),l.a.createElement(i.a,{to:"/"})):l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/",exact:!0},l.a.createElement(g,null)),l.a.createElement(i.b,{path:"/:userId/summits",exact:!0},l.a.createElement(x,null)),l.a.createElement(i.b,{path:"/auth"},l.a.createElement(D,null)),l.a.createElement(i.a,{to:"/auth"})),l.a.createElement(E.a.Provider,{value:{isLoggedIn:!!a,token:a,userId:m,login:o,logout:c}},l.a.createElement(s.a,null,l.a.createElement(h,null),l.a.createElement(u.a,null,l.a.createElement("main",null,l.a.createElement(r.Suspense,{fallback:l.a.createElement(b.a,{asOverlay:!0})},e))),l.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(85);c.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[67,1,2]]]);
//# sourceMappingURL=main.3e141989.chunk.js.map